(function(e){function t(t){for(var r,n,i=t[0],c=t[1],u=t[2],p=0,d=[];p<i.length;p++)n=i[p],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,i=1;i<s.length;i++){var c=s[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var r={},o={app:0},a=[];function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=r,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var r=s("85ec"),o=s.n(r);o.a},"29c9":function(e,t,s){"use strict";var r=s("65e5"),o=s.n(r);o.a},4597:function(e,t,s){"use strict";var r=s("b4e2"),o=s.n(r);o.a},"4b71":function(e,t,s){"use strict";var r=s("7322"),o=s.n(r);o.a},"4f1b":function(e,t,s){"use strict";var r=s("a83b"),o=s.n(r);o.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[(e.$store.state.isAuth,e._e()),s("router-view")],1)},a=[],n=(s("d3b7"),s("ac1f"),s("5319"),s("bc3a")),i=s.n(n),c={methods:{test:function(e){window.location.replace("/"),localStorage.removeItem("access"),localStorage.removeItem("refresh")}},beforeCreate:function(){var e=this;void 0!=localStorage.getItem("refresh")&&(i.a.interceptors.response.use(void 0,(function(t){return 401===t.response.status&&t.config.url!="".concat(e.$store.state.baseURL,"/auth/jwt/create/")?(console.log(t.config),console.log("401"),e.$store.dispatch("getRefresh").then((function(s){return localStorage.setItem("access",s.data.access),e.$store.commit("setToken",s.data.access),t.config.__isRetryRequest=!0,t.config.headers.Authorization="JWT "+s.data.access,e.$store.state.authOptions=t.config,console.log("w"),e.$store.dispatch("whoAmI",t.config)}))):Promise.reject(t.response)})),this.$store.dispatch("whoAmI",this.$store.state.authOptions))}},u=c,l=(s("034f"),s("2877")),p=Object(l["a"])(u,o,a,!1,null,null,null),d=p.exports,m=s("9483");Object(m["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var v=s("8c4f"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"auto"},[e._m(0),e.regWindow?s("Registr"):e._e(),0!=e.isAuth||e.regWindow?e._e():s("Auth"),e.regWindow||e.$store.state.isAuth?e._e():s("button",{on:{click:function(t){e.regWindow=!e.regWindow}}},[e._v("Регистрация")]),e.regWindow?s("button",{on:{click:function(t){e.regWindow=!e.regWindow}}},[e._v("Вернуться")]):e._e(),1==e.isAuth?s("Quest",{attrs:{name:e.qwer}}):e._e()],1)},h=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo"},[r("img",{attrs:{src:s("cf05"),alt:"",height:"100px"}})])}],g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"auth"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.payload.username,expression:"payload.username"}],staticClass:"firstinp",attrs:{name:"username",placeholder:"Логин",type:"text"},domProps:{value:e.payload.username},on:{input:function(t){t.target.composing||e.$set(e.payload,"username",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.payload.password,expression:"payload.password"}],attrs:{type:"password",placeholder:"Пароль",name:"password"},domProps:{value:e.payload.password},on:{input:function(t){t.target.composing||e.$set(e.payload,"password",t.target.value)}}}),e._l(e.$store.state.status,(function(t,r){return s("div",{key:r},e._l(t,(function(t,r){return s("p",{key:r},[e._v(e._s(t))])})),0)})),s("div",{staticClass:"regWindow"}),s("button",{on:{click:function(t){return e.auth()}}},[e._v("Вход")])],2)},_=[],w={name:"auth",data:function(){return{payload:{username:"",password:""},regWindow:!1}},methods:{registr:function(){this.$store.commit("registr",this.payload)},auth:function(){console.log(this.payload),this.$store.commit("auth",this.payload),console.log(this.$store.state.user)}}},$=w,y=(s("29c9"),s("606a"),Object(l["a"])($,g,_,!1,null,"fb7a36f2",null)),b=y.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data"},[s("p",[e._v("Добро пожаловать, "+e._s(e.$store.state.user.username))]),e.$store.state.user?s("div",[s("p",[e._v(e._s(e.isAccess))]),e.isAccess2?s("div",[s("p",[e._v("Текущее задание: "+e._s(e.$store.getters.getProgress))]),s("router-link",{attrs:{to:"/quest"}},[e._v("Начать квест")])],1):e._e()]):e._e()])},q=[],x={name:"quest",props:["test","name"],computed:{isAccess2:function(){return 1==this.$store.state.user.user_is_active.active},isAccess:function(){return 1==this.$store.state.user.user_is_active.active?"Ваш аккаунт подтвержден":"Дождитесь пока администратор подтвердит ваш аккаунт"}}},k=x,C=(s("a6c0"),Object(l["a"])(k,A,q,!1,null,"7fa3e029",null)),T=C.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"registr"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.payload.people,expression:"payload.people"}],attrs:{type:"text",placeholder:"Количество человек"},domProps:{value:e.payload.people},on:{input:function(t){t.target.composing||e.$set(e.payload,"people",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.payload.number,expression:"payload.number"}],attrs:{type:"text",placeholder:"Контактный телефон"},domProps:{value:e.payload.number},on:{input:function(t){t.target.composing||e.$set(e.payload,"number",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.payload.team_name,expression:"payload.team_name"}],attrs:{type:"text",placeholder:"Название команды"},domProps:{value:e.payload.team_name},on:{input:function(t){t.target.composing||e.$set(e.payload,"team_name",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.payload.username,expression:"payload.username"}],staticClass:"firstinp",attrs:{name:"username",placeholder:"Логин",type:"text"},domProps:{value:e.payload.username},on:{input:function(t){t.target.composing||e.$set(e.payload,"username",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.payload.password,expression:"payload.password"}],attrs:{type:"password",placeholder:"Пароль",name:"password"},domProps:{value:e.payload.password},on:{input:function(t){t.target.composing||e.$set(e.payload,"password",t.target.value)}}}),s("button",{on:{click:function(t){return e.registr()}}},[e._v("Создать аккаунт")]),e._l(e.$store.state.regstatus,(function(t,r){return s("div",{key:r},e._l(t,(function(t,r){return s("p",{key:r},[e._v(e._s(t))])})),0)}))],2)},O=[],j={name:"auth",data:function(){return{payload:{username:"",password:"",people:"",number:"",team_name:""},regWindow:!1}},methods:{registr:function(){this.$store.commit("registr",this.payload)},auth:function(){console.log(this.payload),this.$store.commit("auth",this.payload),console.log(this.$store.state.user)}}},I=j,P=(s("e980"),Object(l["a"])(I,S,O,!1,null,"3c59fe88",null)),W=P.exports,R={name:"AutoQuest",components:{Auth:b,Quest:T,Registr:W},data:function(){return{qwe:"qwe",regWindow:!1}},computed:{isAuth:function(){return this.$store.state.isAuth},qwer:function(){return this.$store.state.user.username}}},E=R,L=(s("4f1b"),Object(l["a"])(E,f,h,!1,null,null,null)),N=L.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"questMain"},[e.isEnd?s("div",{staticClass:"congr"},[s("h1",[e._v("Поздравляем с окончанием квеста")]),s("h3",[e._v("Мы с вами свяжемся для подведения итогов")]),s("button",{staticClass:"exit",on:{click:e.test}},[e._v("Выход")])]):e._e(),e.isEnd?e._e():s("div",{staticClass:"quest"},[s("div",{staticClass:"imgtextblock"},[e.haveImg?s("img",{attrs:{src:e.$store.state.q.missions[e.$store.state.user.user_is_active.progress].image,alt:""}}):e._e(),e.$store.state.q.missions[e.$store.state.user.user_is_active.progress]?s("p",[e._v(" "+e._s(e.$store.state.q.missions[e.$store.state.user.user_is_active.progress].text)+" ")]):e._e()]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),s("button",{on:{click:e.checkCode}},[e._v("Отправить ответ")]),s("button",{on:{click:e.help}},[e._v("Взять подсказку")]),s("div",{staticClass:"itog"},[s("p",[e._v(e._s(e.$store.state.user.username))]),s("p",[e._v("Кол-во баллов: "+e._s(e.$store.state.user.user_is_active.score))])])])])},U=[],J=(s("99af"),s("a9e3"),s("1276"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"data"},[s("p",[e._v("Добро пожаловать, "+e._s(e.$store.state.user.username))]),s("p",[e._v(e._s(e.isAccess))]),e.$store.state.user.user_is_active.active?s("div",[s("p",[e._v("Текущее задание: "+e._s(e.$store.state.user.user_is_active.progress))]),s("router-link",{attrs:{to:"/quest"}},[e._v("Начать квест")])],1):e._e()])}),Q=[],M={name:"quest",computed:{isAccess:function(){return 1==this.$store.state.user.user_is_active.active?"Ваш аккаунт подтвержден":"Дождитесь пока администратор подтвердит ваш аккаунт"}}},z=M,G=(s("4597"),Object(l["a"])(z,J,Q,!1,null,"36caeb6c",null)),D=(G.exports,{name:"AutoQuest",components:{Auth:b},created:function(){void 0==localStorage.getItem("refresh")&&window.location.replace("/"),this.$store.commit("getQuest")},data:function(){return{code:"",tek:0,someTime:0,lstHlp:this.lastHelp}},methods:{test:function(e){window.location.replace("/"),localStorage.removeItem("access"),localStorage.removeItem("refresh")},time:function(){var e=new Date,t=e.getHours(),s=e.getMinutes();return 60*t+s},help:function(){var e=this;if(void 0!=this.$store.state.q.missions[this.$store.state.user.user_is_active.progress]){var t=this.time();this.$store.dispatch("whoAmI",{method:"GET",url:"".concat(this.$store.state.baseURL,"/auth/users/me/"),headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(s){e.$store.state.q.missions[e.$store.state.user.user_is_active.progress].answer_for_quest.length!=e.$store.state.user.user_is_active.progressAnswer?(console.log(e.$store.state.q.missions[e.$store.state.user.user_is_active.progress].answer_for_quest[e.$store.state.user.user_is_active.progressAnswer].reload_time),Math.abs(t-e.lastHelpTime)<e.$store.state.q.missions[e.$store.state.user.user_is_active.progress].answer_for_quest[e.$store.state.user.user_is_active.progressAnswer].reload_time?alert("Вы сможете взять подсказку через ".concat(e.$store.state.q.missions[e.$store.state.user.user_is_active.progress].answer_for_quest[e.$store.state.user.user_is_active.progressAnswer].reload_time-Number(Math.abs(t-e.lastHelpTime))," мин")):(e.$store.state.user.user_is_active.lastHelp="".concat((t-t%60)/60,":").concat(t%60),e.someTime="".concat((t-t%60)/60,":").concat(t%60),alert(e.$store.state.q.missions[e.$store.state.user.user_is_active.progress].answer_for_quest[e.$store.state.user.user_is_active.progressAnswer].ans),e.$store.commit("incAns"),e.$store.commit("decScore"),e.$store.dispatch("whoAmI",{method:"PATCH",url:"".concat(e.$store.state.baseURL,"/data/active/").concat(e.$store.state.user.user_is_active.id,"/"),data:{active:!0,key:e.$store.state.user.id,progress:e.$store.state.user.user_is_active.progress,lastHelp:"".concat((t-t%60)/60,":").concat(t%60),progressAnswer:e.$store.state.user.user_is_active.progressAnswer,score:e.$store.state.user.user_is_active.score},headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json"}}))):alert("Подсказок больше нет")})),console.log("qwe")}},checkCode:function(){var e=this.time();void 0!=this.$store.state.q.missions[this.$store.state.user.user_is_active.progress]&&(this.code.toLowerCase()==this.$store.state.q.missions[this.$store.state.user.user_is_active.progress].code.toLowerCase()?(this.$store.state.q.lenOfQuest>=this.$store.state.user.user_is_active.progress&&(this.$store.commit("inc"),this.$store.commit("incScore")),this.$store.dispatch("whoAmI",{method:"PATCH",url:"".concat(this.$store.state.baseURL,"/data/active/").concat(this.$store.state.user.user_is_active.id,"/"),data:{active:!0,key:this.$store.state.user.id,progress:this.$store.state.user.user_is_active.progress,progressAnswer:0,score:this.$store.state.user.user_is_active.score,lastHelp:"".concat((e-e%60)/60,":").concat(e%60)},headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/json"}})):alert("Неправильный ответ"))}},computed:{isEnd:function(){if(void 0==this.$store.state.q.missions[this.$store.state.user.user_is_active.progress])return!0},haveImg:function(){return void 0!=this.$store.state.q.missions[this.$store.state.user.user_is_active.progress]},progress:function(){return this.$store.state.user.user_is_active.progress},lastHelpTime:function(){var e=this.$store.state.user.user_is_active.lastHelp.split(":");return 60*e[0]+Number(e[1])}}}),F=D,B=(s("4b71"),Object(l["a"])(F,H,U,!1,null,null,null)),K=B.exports;r["a"].use(v["a"]);var V=[{path:"/",name:"auto",component:N},{path:"/quest",name:"quest",component:K}],X=new v["a"]({routes:V}),Y=X,Z=s("2f62");r["a"].use(Z["a"]);var ee="",te={state:{missions:"",lenOfQuest:0},mutations:{}},se=new Z["a"].Store({state:{isAuth:!1,baseURL:ee,progressData:"",authOptions:{method:"GET",url:"".concat(ee,"/auth/users/me/"),headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/x-www-form-urlencoded"}},user:{username:"",groups:"",user_is_active:{id:"",active:"",progress:"",key:""}},status:"",regstatus:""},mutations:{registr:function(e,t){i.a.post("".concat(e.baseURL,"/data/no-detail-user/"),t).then((function(t){console.log("good"),e.regstatus=[["Аккаунт создан, можете войти"]]})).catch((function(t){e.regstatus=[["Заполните все поля"]]}))},setAuth:function(e,t){e.user=t,e.isAuth=!0},getQuest:function(e){i.a.get("".concat(e.baseURL,"/data/quest/")).then((function(t){e.q.missions=t.data,e.q.lenOfQuest=e.q.missions.length}))},inc:function(e){e.user.user_is_active.progress+=1},incScore:function(e){e.user.user_is_active.score+=e.q.missions[e.user.user_is_active.progress-1].cost},incAns:function(e){e.user.user_is_active.progressAnswer+=1},decScore:function(e){e.user.user_is_active.score=e.user.user_is_active.score-e.q.missions[e.user.user_is_active.progress].answer_for_quest[e.user.user_is_active.progressAnswer-1].cost},setToken:function(e,t){return localStorage.setItem("access",t),e.authOption={method:"GET",url:"".concat(e.baseURL,"/auth/users/me/"),headers:{Authorization:"JWT ".concat(t.access),"Content-Type":"application/x-www-form-urlencoded"}},!0},auth:function(e,t){console.log(t),i.a.post("".concat(e.baseURL,"/auth/jwt/create/"),t).then((function(t){console.log(t.data),localStorage.setItem("access",t.data.access),localStorage.setItem("refresh",t.data.refresh),i()({method:"GET",url:"".concat(e.baseURL,"/auth/users/me/"),headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){e.isAuth=!0,e.user=t.data}))})).catch((function(t){e.isAuth=!1}))}},actions:{authAndGo:function(e,t){var s=e.commit;e.dispatch,e.state;s("auth",t)},whoAmI:function(e,t){var s=e.state,r=e.commit;return i()(t).then((function(e){try{void 0==e.data.username?(s.progressData=e.data,console.log("test1")):(s.user=e.data,console.log(s.user),console.log("test2"),console.log(e.data),r("setAuth",e.data))}catch(t){}})).catch((function(e){console.log("test3")}))},getRefresh:function(e){var t=e.state;return i.a.post("".concat(t.baseURL,"/auth/jwt/refresh/"),{refresh:localStorage.getItem("refresh")})}},getters:{getActive:function(e){return void 0==e.user.user_is_active.active&&0==e.user.user_is_active.active&&"Дождитесь пока администратор подтвердит ваш аккаунт"},getProgress:function(e){return void 0!=e.user.user_is_active.progress?e.user.user_is_active.progress:0}},modules:{q:te}});r["a"].config.productionTip=!1,new r["a"]({router:Y,store:se,render:function(e){return e(d)}}).$mount("#app")},"606a":function(e,t,s){"use strict";var r=s("e471"),o=s.n(r);o.a},"65e5":function(e,t,s){},7322:function(e,t,s){},"85ec":function(e,t,s){},a6c0:function(e,t,s){"use strict";var r=s("c83c"),o=s.n(r);o.a},a83b:function(e,t,s){},b4e2:function(e,t,s){},c83c:function(e,t,s){},cf05:function(e,t,s){e.exports=s.p+"img/logo.ffb8c7ac.png"},d52c:function(e,t,s){},e471:function(e,t,s){},e980:function(e,t,s){"use strict";var r=s("d52c"),o=s.n(r);o.a}});
//# sourceMappingURL=app.16e48daf.js.map